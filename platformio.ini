; ---------------------------------------------------------------------------
; PlatformIO Project Configuration File
; ---------------------------------------------------------------------------
; This file defines how PlatformIO builds, uploads, and links your project.
; It includes environment settings, library dependencies, build flags, and
; optional shared configuration files.
;
; For full documentation:
; https://docs.platformio.org/page/projectconf.html
; ---------------------------------------------------------------------------

[env:giga_r1_m7]
; -------------------------
; Target Platform & Board
; -------------------------

platform = ststm32
; ^ Use the ST STM32 platform (ArduinoCore-mbed is built on top of this)

board = giga_r1_m7
; ^ Select the Arduino GIGA R1 M7 board

framework = arduino
; ^ Use the Arduino framework rather than mbed, Zephyr, etc.

board_build.arduino.flash_layout = 100_0
; ^ Select a flash memory layout profile for the GIGA R1 M7.
;   "100_0" allocates 100% of the flash to the primary core application.

board_upload.maximum_size = 2097152
; ^ Max firmware upload size in bytes (2 MB). Ensures builds do not exceed
;   device limits, preventing invalid binaries.

; -------------------------
; Library Dependencies
; -------------------------

lib_deps =
    lvgl/lvgl
    ; ^ LVGL graphics library (UI framework)

    arduino-libraries/Arduino_GigaDisplay@^1.0.2
    ; ^ Display driver for the GIGA Display Shield

    arduino-libraries/Arduino_GigaDisplay_GFX@^1.1.0
    ; ^ Graphics helper for rendering on the display

    arduino-libraries/Arduino_GigaDisplayTouch@^1.0.1
    ; ^ Touch input driver for the shield

    arduino-libraries/NTPClient@^3.2.1
    ; ^ Utility for getting network time via NTP

    QueueArray
    ; ^ Lightweight FIFO queue utility

    bblanchon/ArduinoJson@6.21.0
    ; ^ JSON parsing and serialization

    git@github.com:projectsinflight/RampSoakPID.git
    ; ^ Ramp / Soak

; -------------------------
; Build Flags
; -------------------------

build_flags =
    -Iinclude
    ; ^ Add the "include" directory to the compilerâ€™s include path.
    ;   Required so LVGL finds your local lv_conf.h before scanning libraries.

    -DLV_CONF_INCLUDE_SIMPLE
    ; ^ Instruct LVGL to use simple include rules:
    ;   #include "lv_conf.h"
    ;   This helps override the default lv_conf bundled in Arduino libraries.

; lib_ldf_mode = chain+
; ^ (Optional) Controls how PlatformIO scans library dependencies.
;   "chain+" expands dependency discovery but is not needed unless
;   working with more complex library relationships.

; -------------------------
; Extra / Shared Config
; -------------------------

[platformio]
extra_configs = ../common.ini
; ^ Load additional configuration from a shared file one directory up.
